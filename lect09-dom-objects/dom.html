<!DOCTYPE html>
<html>
  <head>
    <title>DOM Manipulation and JS Objects</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    />
    <style>
      .red {
        color: red;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row mt-4">
        <h1 class="col-12">Create Elements on the fly</h1>
        <div class="col-12 mt-4">
          <form id="simple-form">
            <div class="form-row">
              <div class="col-12 mt-2 col-sm-3 mt-sm-0">
                <label for="input" class="sr-only">Add a paragraph</label>
                <input
                  type="text"
                  class="form-control"
                  id="input"
                  placeholder="Add some text"
                />
              </div>

              <div class="col-12 mt-2 col-sm-auto mt-sm-0">
                <button role="button" type="submit" class="btn btn-primary">
                  Add
                </button>
                <button
                  role="button"
                  type="button"
                  class="btn btn-danger"
                  id="btn-delete"
                >
                  Delete All
                </button>
              </div>
              <!-- .col -->
            </div>
          </form>
        </div>
        <div class="col-12 mt-4">
          <div id="paragraphs">
            <p class="red">I am a paragraph</p>
            <p class="red">I am a second paragraph</p>
          </div>
        </div>
      </div>
    </div>

    <script>

      // Advantage of using .onsubmit
        // Will trigger if the user presses "enter"
        // Will trigger when user clicks on the "submit" button

      document.querySelector("#simple-form").onsubmit = function(event) {
        event.preventDefault();

        // Get user input
        let userInput = document.querySelector("#input").value.trim()
        // "     hello       "
        // "hello"
        
        if(userInput.length == 0) {
          // No
          alert("Please enter a name")
        } else {
          // Else create element
          let pElement = document.createElement("p")
          // <p></p>

          // Setting the value of pElement
          pElement.innerHTML = userInput
          // <p>userInput</p>

          pElement.classList.add("red")

          console.log(pElement)

          // Select the parent element
          let paragraphs = document.querySelector("#paragraphs")

          // Appending new <p> element to parent
          paragraphs.appendChild(pElement)

          // Clearing the input
          document.querySelector("#input").value = ""
        }
      }

      // Delete All button
      // - When the delete all button is clicked, remove everything from #paragraphs div
      document.querySelector("#btn-delete").onclick = function() {

        let paragraphs = document.querySelector("#paragraphs")

        // Run a while loop to delete all of #paragraph's children
        // hasChildNodes() returns true or false
        while(paragraphs.hasChildNodes()) {
          paragraphs.removeChild(paragraphs.lastChild)
        }

        // Alternatively
        // paragraphs.innerHTML = ""

      }

    </script>
  </body>
</html>
